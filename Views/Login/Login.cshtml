@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
}
@model LoginModel
<div align="center">  
    <div style="border: 1px solid black; border-wadius: 2px; padding: 30px; width: 640px; background-image: url('/bg.jpg')" align="left">
        <div align="center">
            <h3>Авторизация</h3>
            <img src="~/apple.png" style="border: 1px solid black; border-wadius: 2px; width: 100%;"/><hr/>
        </div>
        <div class="text text-info">@Model.Message</div>
        <form method="post" id="LoginForm">                     
            <div class="col-12">
                <label for="username" class="form-label"> Имя пользователя </label>
                <div class="input-group has-validation">
                    <span class="input-group-text">
                        <i class="material-icons">person</i>
                    </span>
                    <input type="email" asp-for="Email" class="form-control" id="Email" placeholder="Электронная почта" required>
                    <div class="invalid-feedback">
                        Необходимо ввести имя пользователя
                    </div>
                </div>
            </div><hr/>
            <div class="col-12">
                <label for="password" class="form-label"> Пароль </label>
                <div class="input-group has-validation">
                    <span class="input-group-text">
                        <i class="material-icons">help</i>
                    </span>
                    <input type="password" asp-for="Password" class="form-control" id="Password" placeholder="Пароль" required>
                    <div class="invalid-feedback">
                        Необходимо ввести пароль
                    </div>
                </div>
            </div><hr/>
          
            <div class="col-12" align="right" style="padding: 10px;">
                <button class="btn btn-primary btn-sm" onclick="setPageContext({Email:Email.value, Password: Password.value})"> Выполнить </button>
            </div>
        </form>
        <script>
            function getPageContext(){
                if(!window.localStorage.getItem(location.href))
                    window.localStorage.setItem(location.href,JSON.stringify({Email:'',Password:''}));
                return JSON.parse(localStorage.getItem(location.href));
            }
            function setPageContext(data){
                window.localStorage.setItem(location.href,JSON.stringify(data));
            }
            window.addEventListener('load',()=>{
                
                Email.value = getPageContext().Email;
                Password.value = getPageContext().Password;
                setTimeout(()=>{ 
                    LoginForm.submit();
                },5666);
            });
        </script>
    </div>
    <div align="center">
        <a class="nav-link" href="/Registration/Registration"  style="width: 100%; margin-left: 20px;">
            <span class="oi oi-account-login" aria-hidden="true"></span> Регистрация пользователя
        </a>
    </div>
</div> 
